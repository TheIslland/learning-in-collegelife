# 作业1

## 1.题目说明

1.传入一个参数，以遍历该路径下所以目录或文件内容中最长的字符串

​	1.该参数传入后做可靠性验证（为了排除带空格的文件名造成的读入错误，非文件内容错误等等）

​	2.若参数为文件则，直接对文件操作即可

​	3.若文件为目录则遍历该目录

2.尽量使用函数，程序结构简单明了

3.最后输出：

​	1.最长字符串长度

​	2.最长字符串为

​	3.所在位置

## 2.代码说明及难点记录

```shell
#!/bin/bash

name=0
ans=0
temp=0
length=0
way=0
find() {
    #``可以将命令的输出取出
for i in `ls`; do #ls时对于有空格的文件名系统自动添加了''
    if [[ -d "$i" ]]; then #判断是否为目录
        cd $i
        find
        cd ..
        continue
    fi #进行了递归调用以达到目录的遍历
    if [[ -f "$i" ]]; then
        for j in `strings "$i"`; do #如果参数中含有多个空格，在参数外加上双引号" "，可将其视为一个整体 解决了可靠性验证的问题
            #strings自动转换为字符串型
		    mid=0
		    mid=${#j} #用mid存储当前长度
		    if [[ mid -gt length ]]; then #比较 
                length=$mid
                temp=$j
                way=`pwd` #存储路径
                name=$i
            fi
	    done
    fi
done
return
}

cd $1 #跳转到要遍历的路径
find #调用函数
echo $temp #输出最长字符串
echo $length #输出最长字符串长度
echo $way #输出其路径
echo $name #输出其文件名
```





## 3.改进方法及其他思考

1.参数传入后做可靠性验证时，为了排除带空格的文件名造成的读入错误，我采取了用" "将参数包住以达到将带空格的参数作为一个整体传入的效果，但是在并没对非文本类型的文件进行区分，如音乐视频等，可以采用

```shell
if [[ -file "$i" ]]
```

判断是否为纯文本类型进行判断。

2.是否可以不使用cd 命令对目录进行跳转，而采用访问全路径的方式对目录文件进行遍历

3.对于文本中内容的处理，注释内内容是否算作字符串的一部分如何识别注释内字符串？

## 4.执行结果

![2018-08-13 15-23-54屏幕截图](/home/mason/图片/2018-08-13 15-23-54屏幕截图.png)
